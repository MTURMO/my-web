<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Subir Quiniela</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  body{font-family:'Inter',sans-serif;display:flex;flex-direction:column;align-items:center;padding:50px;background:#f9fafb;}
  h1{margin-bottom:15px;color:#333;font-size:1.8rem;}
  #dropZone{
    width:80%;max-width:600px;padding:50px;border:3px dashed #6366f1;border-radius:12px;background:#eef2ff;color:#333;
    text-align:center;cursor:pointer;transition:background 0.2s;
  }
  #dropZone:hover{background:#e0e7ff;}
  iframe{width:80%;height:500px;border:1px solid #ccc;margin-top:20px;border-radius:12px;}
  #checkBtn{margin-top:20px;padding:12px 25px;font-size:16px;background:linear-gradient(90deg,#10b981,#14b8a6);color:white;border:none;border-radius:10px;cursor:pointer;transition:transform 0.2s;}
  #checkBtn:hover{transform:translateY(-2px);}
  a{margin-top:20px;color:#3b82f6;text-decoration:none;font-weight:500;}
</style>
</head>
<body>

<h1>Sube tu Quiniela Generada por Python</h1>
<p>Arrastra el archivo HTML o haz clic para seleccionar</p>

<div id="dropZone">Arrastra el archivo HTML aquí</div>
<button id="checkBtn">✅ Check Quiniela</button>
<iframe id="preview"></iframe>

<script>
const dropZone = document.getElementById('dropZone');
const preview = document.getElementById('preview');
let quinielaHTML = "";

dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.style.background = '#dbeafe'; });
dropZone.addEventListener('dragleave', e => { dropZone.style.background = '#eef2ff'; });

dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.style.background = '#eef2ff';
  const file = e.dataTransfer.files[0];
  if(file && file.type === "text/html"){
    const reader = new FileReader();
    reader.onload = ev => { quinielaHTML = ev.target.result; preview.srcdoc = quinielaHTML; }
    reader.readAsText(file);
  } else { alert("Solo se permite un archivo HTML"); }
});

dropZone.addEventListener('click', () => {
  const input = document.createElement('input');
  input.type='file'; input.accept='.html';
  input.onchange = e => {
    const file = e.target.files[0];
    if(file && file.type === "text/html"){
      const reader = new FileReader();
      reader.onload = ev => { quinielaHTML = ev.target.result; preview.srcdoc = quinielaHTML; }
      reader.readAsText(file);
    } else { alert("Solo se permite un archivo HTML"); }
  };
  input.click();
});

document.getElementById('checkBtn').addEventListener('click', () => {
  if(!quinielaHTML){ alert("Arrastra primero un HTML de quiniela"); return; }
  localStorage.setItem("quiniela_oficial", quinielaHTML);
  alert("✅ Quiniela marcada como oficial para los participantes");
});
</script>

<a href="admin.html">⬅ Volver al Menú de Admin</a>
</body>
</html>
